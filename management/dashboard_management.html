<!DOCTYPE html>
<html>
<head>
  <title>Dashboard Management</title>
</head>
<body>

<h2>Dashboard Management</h2>

<form id="formPengajuan">
  <input type="text" id="nama" placeholder="Nama" required><br><br>
  <input type="text" id="judul" placeholder="Judul" required><br><br>
  <textarea id="deskripsi" placeholder="Deskripsi" required></textarea><br><br>
  <button type="submit">Kirim</button>
</form>

<h3>Riwayat Pengajuan</h3>
<ul id="riwayat"></ul>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getFirestore, collection, addDoc, getDocs, onSnapshot, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "ISI_APIKEY_KAMU",
    authDomain: "ISI_AUTHDOMAIN_KAMU",
    projectId: "ISI_PROJECTID_KAMU",
    storageBucket: "ISI_STORAGE_KAMU",
    messagingSenderId: "ISI_SENDERID_KAMU",
    appId: "ISI_APPID_KAMU"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const form = document.getElementById("formPengajuan");
  const riwayat = document.getElementById("riwayat");

  // Submit data
  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const nama = document.getElementById("nama").value;
    const judul = document.getElementById("judul").value;
    const deskripsi = document.getElementById("deskripsi").value;

    await addDoc(collection(db, "pengajuan"), {
      nama,
      judul,
      deskripsi,
      createdAt: serverTimestamp()
    });

    alert("Data berhasil dikirim!");

    form.reset();
  });

  // Real-time load
  onSnapshot(collection(db, "pengajuan"), (snapshot) => {
    riwayat.innerHTML = "";
    snapshot.forEach((doc) => {
      const data = doc.data();
      const li = document.createElement("li");
      li.textContent = data.nama + " - " + data.judul;
      riwayat.appendChild(li);
    });
  });
</script>

</body>
</html>